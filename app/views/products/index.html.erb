<h1>Listing products</h1>

<table>
  <tr>
    
    <th>Product name</th>
    <th>Product type</th>
    <th>Product group</th>
    <th>Supplier</th>
    <th>Range name</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @products.each do |product| %>
  <tr>
    
    <td><%= product.product_name %></td>
    <td>
      
      <% if product.product_type_id.nil? %>
      <% else %>
      <% @producttype = ProductType.find(product.product_type_id) %>
        <%= @producttype.name %>
      <% end %>
    </td>
    <td>
        
        <% if product.product_group_id.nil? %>
        <% else %>
        <% @producttype = ProductGroup.find(product.product_group_id) %>
          <%= @producttype.name %>
        <% end %>
    </td>
    <td>
        
        <% if product.supplier_id.nil? %>
          <% else %>
          <% @supplier = Supplier.find(product.supplier_id) %>
            <%= @supplier.account_reference %>
          <% end %>
    </td>
    <td><%= product.range_name %></td>
    <td><%= link_to 'Show', product %></td>
    <td><%= link_to 'Edit', edit_product_path(product) %></td>
    <td><%= link_to 'Destroy', {:controller=>'products', :action=>'destroy', :id=>"#{product.id}"}, :confirm => 'Are you sure?' %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Product', new_product_path %>
